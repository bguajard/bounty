/* 
	CalendarX; subscribe button initializer; v1.2.8 <https://calendarx.com>
	Copyright (C) 2012-2016 AddEvent(R), Inc.
	@author Michael Nilsson
*/

var calxbutton=function(){var a=!1,b=null;return{initialize:function(){if(!a){a=!0,window.addEventListener?window.addEventListener("message",calxbutton.listen,!1):window.attachEvent("onmessage",calxbutton.listen),calxbutton.removeold("calx-sub-btn-frame"),calxbutton.removeold("calx-sub-form-frame");for(var b=document.getElementsByTagName("*"),c=0,d=0;d<b.length;d+=1)if(calxbutton.hasclass(b[d],"calx-sub-btn")){c++;var e=b[d].getAttribute("data-calendar"),f=b[d].getAttribute("data-configure"),g=b[d].getAttribute("data-title"),h=b[d].getAttribute("data-counter"),i=b[d].getAttribute("data-icon"),j=b[d].getAttribute("data-dimming"),k=b[d].getAttribute("data-theme"),l=b[d].getAttribute("data-preview"),m="";if("undefined"!==f&&null!==f&&(m+="&config="+f),"undefined"!==g&&null!==g&&(m+="&title="+g),"undefined"!==h&&null!==h&&(m+="&counter="+h),"undefined"!==i&&null!==i&&(m+="&icon="+i),"undefined"!==j&&null!==j&&(m+="&dimming="+j),"undefined"!==k&&null!==k&&(m+="&theme="+k),"undefined"!==l&&null!==l&&(m+="&preview="+l),"undefined"!==e){var n=b[d].offsetHeight,o=document.createElement("iframe");o.setAttribute("id","calx-btn-"+e+c),o.setAttribute("src","https://www.calendarx.com/widget/calx-sub-btn/?id="+e+m+"#"+e+c),o.setAttribute("frameborder","0"),o.setAttribute("allowtransparency","true"),o.setAttribute("class","calx-sub-btn-frame"),o.setAttribute("scrolling","no"),o.style.width="0px",o.style.height=n+"px",o.style.border="0px",o.style.overflow="hidden",o.style.display="inline-block",o.style.visibility="visible",o.style.margin="0px",o.style.padding="0px",o.style.background="transparent",b[d].innerHTML="",b[d].appendChild(o);var p=document.createElement("iframe");p.setAttribute("id","calx-form-"+e+c),p.setAttribute("src","https://www.calendarx.com/widget/calx-sub-btn-pop/?id="+e+m+"#"+e+c),p.setAttribute("frameborder","0"),p.setAttribute("allowtransparency","true"),p.setAttribute("class","calx-sub-form-frame"),p.setAttribute("scrolling","yes"),p.style.width="100%",p.style.height="100%",calxbutton.ismobile()?p.style.position="absolute":p.style.position="fixed",p.style.left="0px",p.style.top="0px",p.style.zIndex="9999999999999999",p.style.display="none",p.style.border="0px",p.style.overflow="hidden",p.style.visibility="visible",p.style.margin="0px!important",p.style.padding="0px!important",p.style.background="transparent",document.getElementsByTagName("body")[0].appendChild(p)}}}},removeold:function(a){for(var b=document.getElementsByClassName(a),c=b.length-1;0<=c;c--)b[c]&&b[c].parentElement&&b[c].parentElement.removeChild(b[c])},hasclass:function(a,b){return new RegExp("(\\s|^)"+b+"(\\s|$)").test(a.className)},ismobile:function(){var a=/iPhone|iPad|iPod|Android|BlackBerry|Opera Mini|WPDesktop|nokia|windows mobile|windows phone|iemobile/i.test(navigator.userAgent);return!!a},listen:function(a){var c="";try{c=a.data.type.toString()}catch(a){}if("dimensions"==c)for(var d=a.data.w,e=a.data.h,f=document.getElementsByTagName("iframe"),g=0;g<f.length;g++)if(f[g].contentWindow===a.source){f[g].style.width=d+"px",f[g].style.height=e+"px";break}if("button-click"==c){var h=document.getElementById("calx-form-"+a.data.calendar);if(h){if(b=a.data.calendar,h.style.display="block",calxbutton.ismobile()){var i=0;i=void 0!==window.pageYOffset?window.pageYOffset:document.documentElement.scrollTop,h.style.top=i+"px"}var j={calendar:a.data.calendar,type:"popup-show"};try{h.contentWindow.postMessage(j,"*")}catch(a){}}}if("popup-hide"==c){var h=document.getElementById("calx-form-"+a.data.calendar);h&&(h.style.display="none")}if("webcal-ghost-link"==c){calxbutton.removeold("cx-ghost-link");var k=document.getElementById("cx-ghost-link");if(!k){var l=a.data.lnk,m=document.createElement("a");m.setAttribute("id","cx-ghost-link"),m.setAttribute("href",l),m.setAttribute("class","cx-ghost-link"),m.style.left="-1000px",m.style.top="-1000px",document.getElementsByTagName("body")[0].appendChild(m),setTimeout(function(){var a=document.getElementById("cx-ghost-link");if(a.click)a.click();else if(document.createEvent){var b=document.createEvent("MouseEvents");b.initEvent("click",!0,!0),a.dispatchEvent(b)}},500)}}}}}();calxbutton.initialize();